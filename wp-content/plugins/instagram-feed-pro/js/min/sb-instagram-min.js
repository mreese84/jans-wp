!function($){function t(){return!!document.createElement("video").canPlayType}function e(){function t(){return 1==("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}var e=!1;t()===!0&&(e=!0);var i=0;$("#sb_instagram.sbi").each(function(){i+=2;var t=$(this),n=t.find("#sbi_images"),s=t.find("#sbi_load .sbi_load_btn"),o="standard_resolution",a=parseInt(this.getAttribute("data-cols")),r=JSON.parse(this.getAttribute("data-options")),l="",h="",c="user",u="none",p="",b="",g="",f=this.getAttribute("data-num"),v=this.getAttribute("data-id"),_=[],w="",x=r.disablelightbox;switch(("false"==r.showcaption||""==r.showcaption)&&(l='style="display: none;"'),("false"==r.showlikes||""==r.showlikes)&&(h="display: none;"),"hashtag"==r.type&&(c="tagged"),""!==r.sortby&&(u=r.sortby),"0,0,0"!==r.hovercolor&&(p='style="background: rgba('+r.hovercolor+',0.85)"'),"0,0,0"!==r.hovertextcolor&&(b='style="color: rgba('+r.hovertextcolor+',1)"'),this.getAttribute("data-res")){case"auto":var I=$("#sb_instagram").innerWidth(),k=$("#sb_instagram").innerWidth()/a;680>I&&(k=300),480>I&&I>300&&(k=480),o=150>k?"thumbnail":306>k?"low_resolution":"standard_resolution";break;case"thumb":o="thumbnail";break;case"medium":o="low_resolution";break;default:o="standard_resolution"}if("tagged"==c)var T=r.hashtag.replace(/ /g,"").split(","),D=T;else if("user"==c)var C=v.replace(/ /g,"").split(","),D=C;if("user"==c){var E="",N="https://api.instagram.com/v1/users/"+C[0]+"?access_token="+sb_instagram_js_options.sb_instagram_at;r.headercolor.length&&(E='style="color: #'+r.headercolor+'"'),$.ajax({method:"GET",url:N,dataType:"jsonp",success:function(e){w='<a href="http://instagram.com/'+e.data.username+'" target="_blank" title="@'+e.data.username+'" class="sbi_header_link" '+E+">",w+='<div class="sbi_header_text">',w+="<h3",0==e.data.bio.length&&(w+=' class="sbi_no_bio"'),w+=">@"+e.data.username+"</h3>",e.data.bio.length&&(w+='<p class="sbi_bio">'+e.data.bio+"</p>"),w+="</div>",w+='<div class="sbi_header_img">',w+='<div class="sbi_header_img_hover" '+p+'><i class="fa fa-instagram" '+b+"></i></div>",w+='<img src="'+e.data.profile_picture+'" alt="'+e.data.full_name+'" width="50" height="50">',w+="</div>",w+="</a>",t.find(".sb_instagram_header").prepend(w),t.find(".sbi_follow_btn").length&&t.find(".sbi_follow_btn a").attr("href","http://instagram.com/"+e.data.username)}})}for(var P=0,O=D.length;O>P;P++){var A=D[P],z=new instagramfeed({target:n,get:c,tagName:A,sortBy:u,resolution:o,limit:parseInt(f),template:'<div class="sbi_item sbi_type_{{model.type}} sbi_new" id="sbi_{{id}}" data-date="{{model.created_time_raw}}"><div class="sbi_photo_wrap"><i class="fa fa-play sbi_playbtn"></i><div class="sbi_link" '+p+'><p class="sbi_username"><a href="http://instagram.com/{{model.user.username}}" target="_blank" '+b+'>{{model.user.username}}</a></p><a class="sbi_instagram_link" href="{{link}}" target="_blank" title="Instagram" '+b+'><i class="fa fa-instagram"></i></a><p class="sbi_date" '+b+'>{{model.created_time}}</p><a class="sbi_link_area" href="{{model.images.standard_resolution.url}}" data-lightbox-sbi="'+(i+1)+'" data-title="{{caption}}" data-video="{{model.videos.standard_resolution.url}}" data-id="sbi_{{id}}" data-user="{{model.user.username}}" data-url="{{link}}" data-avatar="{{model.user.profile_picture}}"><i class="fa fa-play sbi_playbtn" '+b+'></i><span class="sbi_lightbox_link" '+b+'><i class="fa fa-arrows-alt"></i></span></a></div><a class="sbi_photo" href="{{link}}" target="_blank"><img src="{{image}}" alt="{{caption}}" /></a></div><div class="sbi_info"><p class="sbi_caption_wrap" '+l+'><span class="sbi_caption" style="color: #'+r.captioncolor+"; font-size: "+r.captionsize+'px;">{{caption}}</span><span class="sbi_expand"> <a href="#"><span class="sbi_more">...</span></a></span></p><div class="sbi_meta" style="color: #'+r.likescolor+"; "+h+'"><span class="sbi_likes" style="font-size: '+r.likessize+'px;"><i class="fa fa-heart" style="font-size: '+r.likessize+'px;"></i>{{likes}}</span><span class="sbi_comments" style="font-size: '+r.likessize+'px;"><i class="fa fa-comment" style="font-size: '+r.likessize+'px;"></i>{{comments}}</span></div></div></div>',filter:function(t){var e=new Date(1e3*t.created_time),i=e.getTime();t.created_time_raw=i,m=e.getMonth(),d=e.getDate(),y=e.getFullYear();var n=new Array;n[n.length]="Jan",n[n.length]="Feb",n[n.length]="Mar",n[n.length]="Apr",n[n.length]="May",n[n.length]="Jun",n[n.length]="Jul",n[n.length]="Aug",n[n.length]="Sep",n[n.length]="Oct",n[n.length]="Nov",n[n.length]="Dec";var s=d+" "+n[m];return t.created_time=s,null!=t.caption&&(t.caption.text=t.caption.text.replace(/"/g,"&quot;")),!0},userId:parseInt(A),accessToken:sb_instagram_js_options.sb_instagram_at,after:function(){function i(){t.removeClass("sbi_small sbi_medium");var e=t.find(".sbi_item").innerWidth();e>120&&240>e?t.addClass("sbi_medium"):120>=e&&t.addClass("sbi_small")}t.find(".sbi_loader").remove(),this.hasNext()?s.show():(s.hide(),t.css("padding-bottom",0)),t.find(".sbi_item").each(function(){var t=$(this),i=t.find(".sbi_link_area"),n=i.attr("href"),s=$("#sbi_lightbox");t.find(".sbi_lightbox_link").click(function(){s.removeClass("sbi_video_lightbox"),t.hasClass("sbi_type_video")&&(s.addClass("sbi_video_lightbox"),$(".sbi_video").attr({poster:$(this).attr("href")}))});var o=t.find(".sbi_info .sbi_caption"),a=r.captionlength;("undefined"==typeof a||""==a)&&(a=99999);var l=t.find(".sbi_photo img").attr("alt");void 0==l&&(l="");var h=l.substring(0,a);if(o.html(h),l.length>a&&t.find(".sbi_expand").show(),t.find(".sbi_expand a").unbind("click").bind("click",function(e){e.preventDefault();var i=jQuery(this),n=i.find(".sbi_more");t.hasClass("sbi_caption_full")?(o.html(h),t.removeClass("sbi_caption_full")):(o.html(l),t.addClass("sbi_caption_full"))}),"true"==x)e||t.find(".sbi_photo").hover(function(){$(this).fadeTo(200,.85)},function(){$(this).stop().fadeTo(500,1)});else{var c=t.find(".sbi_photo_wrap"),d=c.find(".sbi_link");e?(d.css("background","none").show(),d.find("*").hide().end().find(".sbi_link_area").show()):c.hover(function(){d.fadeIn(200)},function(){d.stop().fadeOut(600)})}}),"function"==typeof sbi_custom_js&&sbi_custom_js();var n=function(){var t=0;return function(e,i){clearTimeout(t),t=setTimeout(e,i)}}();$(window).resize(function(){n(function(){i()},500)}),i(),$(".sbi_lightbox_action a").unbind().bind("click",function(){$(this).parent().find(".sbi_lightbox_tooltip").toggle()}),t.find("#sbi_images .sbi_item.sbi_new").sort(function(t,e){var i=$(t).attr("data-date"),n=$(e).attr("data-date");return"none"==u?n-i:Math.round(Math.random())-.5}).appendTo(t.find("#sbi_images")),setTimeout(function(){$("#sbi_images .sbi_item.sbi_new").removeClass("sbi_new")},500),t.find(".sb_instagram_header a").hover(function(){t.find(".sb_instagram_header .sbi_header_img_hover").fadeIn(200)},function(){t.find(".sb_instagram_header .sbi_header_img_hover").stop().fadeOut(600)})},error:function(t){var e="",i="";t.indexOf("access_token")>-1?(e+="<p><b>Error: Access Token is not valid</b><br /><span>This error message is only visible to WordPress admins</span>",i="<p>There's an issue with the Instagram Access Token that you are using. Please obtain a new Access Token on the plugin's Settings page."):t.indexOf("user does not exist")>-1&&(e+="<p><b>Error: The User ID does not exist</b><br /><span>This error is only visible to WordPress admins</span>",i="<p>Please double check the Instagram User ID that you are using. To find your User ID simply enter your Instagram user name into this <a href='http://www.otzberg.net/iguserid/' target='_blank'>tool</a>.</p>"),D.length<2&&$("#sbi_images").empty().append('<p style="text-align: center;">Unable to show Instagram photos</p><div id="sbi_mod_error">'+e+i+"</div>")}});s.click(function(){z.next()}),z.run()}})}(function(){var t,e;t=function(){function t(t,e){var i,n;if(this.options={target:"instafeed",get:"popular",resolution:"thumbnail",sortBy:"none",links:!0,mock:!1,useHttp:!1},"object"==typeof t)for(i in t)n=t[i],this.options[i]=n;this.context=null!=e?e:this,this.unique=this._genKey()}return t.prototype.hasNext=function(){return"string"==typeof this.context.nextUrl&&this.context.nextUrl.length>0},t.prototype.next=function(){return this.hasNext()?this.run(this.context.nextUrl):!1},t.prototype.run=function(e){var i,n,s;if("string"!=typeof this.options.clientId&&"string"!=typeof this.options.accessToken)throw new Error("Missing clientId or accessToken.");if("string"!=typeof this.options.accessToken&&"string"!=typeof this.options.clientId)throw new Error("Missing clientId or accessToken.");return null!=this.options.before&&"function"==typeof this.options.before&&this.options.before.call(this),"undefined"!=typeof document&&null!==document&&(s=document.createElement("script"),s.id="instafeed-fetcher",s.src=e||this._buildUrl(),i=document.getElementsByTagName("head"),i[0].appendChild(s),n="instafeedCache"+this.unique,window[n]=new t(this.options,this),window[n].unique=this.unique),!0},t.prototype.parse=function(t){var e,i,n,s,o,a,r,l,h,c,d,u,p,b,g,f,m,v,_,w,y,x;if("object"!=typeof t){if(null!=this.options.error&&"function"==typeof this.options.error)return this.options.error.call(this,"Invalid JSON data"),!1;throw new Error("Invalid JSON response")}if(200!==t.meta.code){if(null!=this.options.error&&"function"==typeof this.options.error)return this.options.error.call(this,t.meta.error_message),!1;throw new Error("Error from Instagram: "+t.meta.error_message)}if(0===t.data.length){if(null!=this.options.error&&"function"==typeof this.options.error)return this.options.error.call(this,"No images were returned from Instagram"),!1;throw new Error("No images were returned from Instagram")}if(null!=this.options.success&&"function"==typeof this.options.success&&this.options.success.call(this,t),this.context.nextUrl="",null!=t.pagination&&(this.context.nextUrl=t.pagination.next_url),"none"!==this.options.sortBy)switch(b="random"===this.options.sortBy?["","random"]:this.options.sortBy.split("-"),p="least"===b[0]?!0:!1,b[1]){case"random":t.data.sort(function(){return.5-Math.random()});break;case"recent":t.data=this._sortBy(t.data,"created_time",p);break;case"liked":t.data=this._sortBy(t.data,"likes.count",p);break;case"commented":t.data=this._sortBy(t.data,"comments.count",p);break;default:throw new Error("Invalid option for sortBy: '"+this.options.sortBy+"'.")}if("undefined"!=typeof document&&null!==document&&this.options.mock===!1){if(l=t.data,null!=this.options.limit&&l.length>this.options.limit&&(l=l.slice(0,this.options.limit+1||9e9)),i=document.createDocumentFragment(),null!=this.options.filter&&"function"==typeof this.options.filter&&(l=this._filter(l,this.options.filter)),null!=this.options.template&&"string"==typeof this.options.template){for(s="",a="",c="",g=document.createElement("div"),f=0,_=l.length;_>f;f++)o=l[f],r=o.images[this.options.resolution].url,this.options.useHttp||(r=r.replace("http://","//")),a=this._makeTemplate(this.options.template,{model:o,id:o.id,link:o.link,image:r,caption:this._getObjectProperty(o,"caption.text"),likes:o.likes.count,comments:o.comments.count,location:this._getObjectProperty(o,"location.name")}),s+=a;for(g.innerHTML=s,x=[].slice.call(g.childNodes),m=0,w=x.length;w>m;m++)u=x[m],i.appendChild(u)}else for(v=0,y=l.length;y>v;v++)o=l[v],h=document.createElement("img"),r=o.images[this.options.resolution].url,this.options.useHttp||(r=r.replace("http://","//")),h.src=r,this.options.links===!0?(e=document.createElement("a"),e.href=o.link,e.appendChild(h),i.appendChild(e)):i.appendChild(h);this.options.target.append(i),n=document.getElementsByTagName("head")[0],n.removeChild(document.getElementById("instafeed-fetcher")),d="instafeedCache"+this.unique,window[d]=void 0;try{delete window[d]}catch(I){}}return null!=this.options.after&&"function"==typeof this.options.after&&this.options.after.call(this),!0},t.prototype._buildUrl=function(){var t,e,i;switch(t="https://api.instagram.com/v1",this.options.get){case"popular":e="media/popular";break;case"tagged":if("string"!=typeof this.options.tagName)throw new Error("No tag name specified. Use the 'tagName' option.");e="tags/"+this.options.tagName+"/media/recent";break;case"location":if("number"!=typeof this.options.locationId)throw new Error("No location specified. Use the 'locationId' option.");e="locations/"+this.options.locationId+"/media/recent";break;case"user":if("number"!=typeof this.options.userId)throw new Error("No user specified. Use the 'userId' option.");if("string"!=typeof this.options.accessToken)throw new Error("No access token. Use the 'accessToken' option.");e="users/"+this.options.userId+"/media/recent";break;default:throw new Error("Invalid option for get: '"+this.options.get+"'.")}return i=""+t+"/"+e,i+=null!=this.options.accessToken?"?access_token="+this.options.accessToken:"?client_id="+this.options.clientId,null!=this.options.limit&&(i+="&count="+this.options.limit),i+="&callback=instafeedCache"+this.unique+".parse"},t.prototype._genKey=function(){var t;return t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},""+t()+t()+t()+t()},t.prototype._makeTemplate=function(t,e){var i,n,s,o,a;for(n=/(?:\{{2})([\w\[\]\.]+)(?:\}{2})/,i=t;n.test(i);)s=i.match(n)[1],o=null!=(a=this._getObjectProperty(e,s))?a:"",i=i.replace(n,""+o);return i},t.prototype._getObjectProperty=function(t,e){var i,n;for(e=e.replace(/\[(\w+)\]/g,".$1"),n=e.split(".");n.length;){if(i=n.shift(),!(null!=t&&i in t))return null;t=t[i]}return t},t.prototype._sortBy=function(t,e,i){var n;return n=function(t,n){var s,o;return s=this._getObjectProperty(t,e),o=this._getObjectProperty(n,e),i?s>o?1:-1:o>s?1:-1},t.sort(n.bind(this)),t},t.prototype._filter=function(t,e){var i,n,s,o,a;for(i=[],s=function(t){return e(t)?i.push(t):void 0},o=0,a=t.length;a>o;o++)n=t[o],s(n);return i},t}(),e="undefined"!=typeof exports&&null!==exports?exports:window,e.instagramfeed=t}).call(this),function(){"use strict";var t=Array.prototype.slice;try{t.call(document.documentElement)}catch(e){Array.prototype.slice=function(e,i){if(i="undefined"!=typeof i?i:this.length,"[object Array]"===Object.prototype.toString.call(this))return t.call(this,e,i);var n,s=[],o,a=this.length,r=e||0;r=r>=0?r:a+r;var l=i?i:a;if(0>i&&(l=a+i),o=l-r,o>0)if(s=new Array(o),this.charAt)for(n=0;o>n;n++)s[n]=this.charAt(r+n);else for(n=0;o>n;n++)s[n]=this[r+n];return s}}}(),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,n=function(){},s=function(){return i.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,s.prototype=new n,s}),function(t,e,i){"function"==typeof define&&define.amd?define(["jquery"],function(n){return i(n,t,e),n.mobile}):i(t.jQuery,t,e)}(this,document,function(t,e,i,n){!function(t,e,i,n){function s(t){for(;t&&"undefined"!=typeof t.originalEvent;)t=t.originalEvent;return t}function o(e,i){var o=e.type,a,r,l,h,c,d,u,p,b;if(e=t.Event(e),e.type=i,a=e.originalEvent,r=t.event.props,o.search(/^(mouse|click)/)>-1&&(r=E),a)for(u=r.length,h;u;)h=r[--u],e[h]=a[h];if(o.search(/mouse(down|up)|click/)>-1&&!e.which&&(e.which=1),-1!==o.search(/^touch/)&&(l=s(a),o=l.touches,c=l.changedTouches,d=o&&o.length?o[0]:c&&c.length?c[0]:n,d))for(p=0,b=D.length;b>p;p++)h=D[p],e[h]=d[h];return e}function a(e){for(var i={},n,s;e;){n=t.data(e,I);for(s in n)n[s]&&(i[s]=i.hasVirtualBinding=!0);e=e.parentNode}return i}function r(e,i){for(var n;e;){if(n=t.data(e,I),n&&(!i||n[i]))return e;e=e.parentNode}return null}function l(){B=!1}function h(){B=!0}function c(){Y=0,j.length=0,M=!1,h()}function d(){l()}function u(){p(),P=setTimeout(function(){P=0,c()},t.vmouse.resetTimerDuration)}function p(){P&&(clearTimeout(P),P=0)}function b(e,i,n){var s;return(n&&n[e]||!n&&r(i.target,e))&&(s=o(i,e),t(i.target).trigger(s)),s}function g(e){var i=t.data(e.target,k),n;!M&&(!Y||Y!==i)&&(n=b("v"+e.type,e),n&&(n.isDefaultPrevented()&&e.preventDefault(),n.isPropagationStopped()&&e.stopPropagation(),n.isImmediatePropagationStopped()&&e.stopImmediatePropagation()))}function f(e){var i=s(e).touches,n,o,r;i&&1===i.length&&(n=e.target,o=a(n),o.hasVirtualBinding&&(Y=U++,t.data(n,k,Y),p(),d(),z=!1,r=s(e).touches[0],O=r.pageX,A=r.pageY,b("vmouseover",e,o),b("vmousedown",e,o)))}function m(t){B||(z||b("vmousecancel",t,a(t.target)),z=!0,u())}function v(e){if(!B){var i=s(e).touches[0],n=z,o=t.vmouse.moveDistanceThreshold,r=a(e.target);z=z||Math.abs(i.pageX-O)>o||Math.abs(i.pageY-A)>o,z&&!n&&b("vmousecancel",e,r),b("vmousemove",e,r),u()}}function _(t){if(!B){h();var e=a(t.target),i,n;b("vmouseup",t,e),z||(i=b("vclick",t,e),i&&i.isDefaultPrevented()&&(n=s(t).changedTouches[0],j.push({touchID:Y,x:n.clientX,y:n.clientY}),M=!0)),b("vmouseout",t,e),z=!1,u()}}function w(e){var i=t.data(e,I),n;if(i)for(n in i)if(i[n])return!0;return!1}function y(){}function x(e){var i=e.substr(1);return{setup:function(){w(this)||t.data(this,I,{});var n=t.data(this,I);n[e]=!0,N[e]=(N[e]||0)+1,1===N[e]&&L.bind(i,g),t(this).bind(i,y),S&&(N.touchstart=(N.touchstart||0)+1,1===N.touchstart&&L.bind("touchstart",f).bind("touchend",_).bind("touchmove",v).bind("scroll",m))},teardown:function(){--N[e],N[e]||L.unbind(i,g),S&&(--N.touchstart,N.touchstart||L.unbind("touchstart",f).unbind("touchmove",v).unbind("touchend",_).unbind("scroll",m));var n=t(this),s=t.data(this,I);s&&(s[e]=!1),n.unbind(i,y),w(this)||n.removeData(I)}}}var I="virtualMouseBindings",k="virtualTouchID",T="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),D="clientX clientY pageX pageY screenX screenY".split(" "),C=t.event.mouseHooks?t.event.mouseHooks.props:[],E=t.event.props.concat(C),N={},P=0,O=0,A=0,z=!1,j=[],M=!1,B=!1,S="addEventListener"in i,L=t(i),U=1,Y=0,X,F;for(t.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500},F=0;F<T.length;F++)t.event.special[T[F]]=x(T[F]);S&&i.addEventListener("click",function(e){var i=j.length,n=e.target,s,o,a,r,l,h;if(i)for(s=e.clientX,o=e.clientY,X=t.vmouse.clickDistanceThreshold,a=n;a;){for(r=0;i>r;r++)if(l=j[r],h=0,a===n&&Math.abs(l.x-s)<X&&Math.abs(l.y-o)<X||t.data(a,k)===l.touchID)return e.preventDefault(),void e.stopPropagation();a=a.parentNode}},!0)}(t,e,i),function(t){t.mobile={}}(t),function(t,e){var n={touch:"ontouchend"in i};t.mobile.support=t.mobile.support||{},t.extend(t.support,n),t.extend(t.mobile.support,n)}(t),function(t,e,n){function s(e,i,s,o){var a=s.type;s.type=i,o?t.event.trigger(s,n,e):t.event.dispatch.call(e,s),s.type=a}var o=t(i),a=t.mobile.support.touch,r="touchmove scroll",l=a?"touchstart":"mousedown",h=a?"touchend":"mouseup",c=a?"touchmove":"mousemove";t.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(e,i){t.fn[i]=function(t){return t?this.bind(i,t):this.trigger(i)},t.attrFn&&(t.attrFn[i]=!0)}),t.event.special.scrollstart={enabled:!0,setup:function(){function e(t,e){o=e,s(i,o?"scrollstart":"scrollstop",t)}var i=this,n=t(i),o,a;n.bind(r,function(i){t.event.special.scrollstart.enabled&&(o||e(i,!0),clearTimeout(a),a=setTimeout(function(){e(i,!1)},50))})},teardown:function(){t(this).unbind(r)}},t.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var e=this,i=t(e),n=!1;i.bind("vmousedown",function(a){function r(){clearTimeout(d)}function l(){r(),i.unbind("vclick",h).unbind("vmouseup",r),o.unbind("vmousecancel",l)}function h(t){l(),n||c!==t.target?n&&t.preventDefault():s(e,"tap",t)}if(n=!1,a.which&&1!==a.which)return!1;var c=a.target,d;i.bind("vmouseup",r).bind("vclick",h),o.bind("vmousecancel",l),d=setTimeout(function(){t.event.special.tap.emitTapOnTaphold||(n=!0),s(e,"taphold",t.Event("taphold",{target:c}))},t.event.special.tap.tapholdThreshold)})},teardown:function(){t(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),o.unbind("vmousecancel")}},t.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(t){var i=e.pageXOffset,n=e.pageYOffset,s=t.clientX,o=t.clientY;return 0===t.pageY&&Math.floor(o)>Math.floor(t.pageY)||0===t.pageX&&Math.floor(s)>Math.floor(t.pageX)?(s-=i,o-=n):(o<t.pageY-n||s<t.pageX-i)&&(s=t.pageX-i,o=t.pageY-n),{x:s,y:o}},start:function(e){var i=e.originalEvent.touches?e.originalEvent.touches[0]:e,n=t.event.special.swipe.getLocation(i);return{time:(new Date).getTime(),coords:[n.x,n.y],origin:t(e.target)}},stop:function(e){var i=e.originalEvent.touches?e.originalEvent.touches[0]:e,n=t.event.special.swipe.getLocation(i);return{time:(new Date).getTime(),coords:[n.x,n.y]}},handleSwipe:function(e,i,n,o){if(i.time-e.time<t.event.special.swipe.durationThreshold&&Math.abs(e.coords[0]-i.coords[0])>t.event.special.swipe.horizontalDistanceThreshold&&Math.abs(e.coords[1]-i.coords[1])<t.event.special.swipe.verticalDistanceThreshold){var a=e.coords[0]>i.coords[0]?"swipeleft":"swiperight";return s(n,"swipe",t.Event("swipe",{target:o,swipestart:e,swipestop:i}),!0),s(n,a,t.Event(a,{target:o,swipestart:e,swipestop:i}),!0),!0}return!1},eventInProgress:!1,setup:function(){var e,i=this,n=t(i),s={};e=t.data(this,"mobile-events"),e||(e={length:0},t.data(this,"mobile-events",e)),e.length++,e.swipe=s,s.start=function(e){if(!t.event.special.swipe.eventInProgress){t.event.special.swipe.eventInProgress=!0;var n,a=t.event.special.swipe.start(e),r=e.target,l=!1;s.move=function(e){a&&!e.isDefaultPrevented()&&(n=t.event.special.swipe.stop(e),l||(l=t.event.special.swipe.handleSwipe(a,n,i,r),l&&(t.event.special.swipe.eventInProgress=!1)),Math.abs(a.coords[0]-n.coords[0])>t.event.special.swipe.scrollSupressionThreshold&&e.preventDefault())},s.stop=function(){l=!0,t.event.special.swipe.eventInProgress=!1,o.off(c,s.move),s.move=null},o.on(c,s.move).one(h,s.stop)}},n.on(l,s.start)},teardown:function(){var e,i;e=t.data(this,"mobile-events"),e&&(i=e.swipe,delete e.swipe,e.length--,0===e.length&&t.removeData(this,"mobile-events")),i&&(i.start&&t(this).off(l,i.start),i.move&&o.off(c,i.move),i.stop&&o.off(h,i.stop))}},t.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe.left",swiperight:"swipe.right"},function(e,i){t.event.special[e]={setup:function(){t(this).bind(i,t.noop)},teardown:function(){t(this).unbind(i)}}})}(t,this)}),function(){var e=jQuery,i=function(){function t(){this.fadeDuration=500,this.fitImagesInViewport=!0,this.resizeDuration=700,this.positionFromTop=50,this.showImageNumberLabel=!0,this.alwaysShowNavOnTouchDevices=!1,this.wrapAround=!1}return t.prototype.albumLabel=function(t,e){return t+" / "+e},t}(),n=function(){function i(t){this.options=t,this.album=[],this.currentImageIndex=void 0,this.init()}return i.prototype.init=function(){this.enable(),this.build()},i.prototype.enable=function(){var t=this;e("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox-sbi], area[data-lightbox-sbi]",function(i){return t.start(e(i.currentTarget)),!1})},i.prototype.build=function(){var i=this;e("<div id='sbi_lightboxOverlay' class='sbi_lightboxOverlay'></div><div id='sbi_lightbox' class='sbi_lightbox'><div class='sbi_lb-outerContainer'><div class='sbi_lb-container'><video class='sbi_video' src='' poster='' controls></video><img class='sbi_lb-image' src='' /><div class='sbi_lb-nav'><a class='sbi_lb-prev' href='' ></a><a class='sbi_lb-next' href='' ></a></div><div class='sbi_lb-loader'><a class='sbi_lb-cancel'></a></div></div></div><div class='sbi_lb-dataContainer'><div class='sbi_lb-data'><div class='sbi_lb-details'><span class='sbi_lb-caption'></span><span class='sbi_lb-number'></span><div class='sbi_lightbox_action sbi_share'><a href='JavaScript:void(0);'><i class='fa fa-share'></i>Share</a><p class='sbi_lightbox_tooltip sbi_tooltip_social'><a href='' target='_blank' id='sbi_facebook_icon'><i class='fa fa-facebook-square'></i></a><a href='' target='_blank' id='sbi_twitter_icon'><i class='fa fa-twitter'></i></a><a href='' target='_blank' id='sbi_google_icon'><i class='fa fa-google-plus'></i></a><a href='' target='_blank' id='sbi_linkedin_icon'><i class='fa fa-linkedin'></i></a><a href='' id='sbi_pinterest_icon' target='_blank'><i class='fa fa-pinterest'></i></a><i class='fa fa-play fa-rotate-90'></i></p></div><div class='sbi_lightbox_action sbi_instagram'><a href='http://instagram.com/' target='_blank'><i class='fa fa-instagram'></i>Instagram</a></div><div id='sbi_mod_link' class='sbi_lightbox_action'><a href='JavaScript:void(0);'><i class='fa fa-times'></i>Hide photo (admin)</a><p id='sbi_mod_box' class='sbi_lightbox_tooltip'>Add this ID to the plugin's <strong>Hide Photos</strong> setting: <span id='sbi_photo_id'></span><i class='fa fa-play fa-rotate-90'></i></p></div></div><div class='sbi_lb-closeContainer'><a class='sbi_lb-close'></a></div></div></div></div>").appendTo(e("body")),this.$lightbox=e("#sbi_lightbox"),this.$overlay=e("#sbi_lightboxOverlay"),this.$outerContainer=this.$lightbox.find(".sbi_lb-outerContainer"),this.$container=this.$lightbox.find(".sbi_lb-container"),this.containerTopPadding=parseInt(this.$container.css("padding-top"),10),this.containerRightPadding=parseInt(this.$container.css("padding-right"),10),this.containerBottomPadding=parseInt(this.$container.css("padding-bottom"),10),this.containerLeftPadding=parseInt(this.$container.css("padding-left"),10),this.$overlay.hide().on("click",function(){return i.end(),!1}),$(document).on("click",function(e,i,n){$(e.target).closest(".sbi_lb-outerContainer").length||$(e.target).closest(".sbi_lb-dataContainer").length||($("#sbi_lightboxOverlay, #sbi_lightbox").fadeOut(),t()&&$("#sbi_lightbox .sbi_video")[0].pause())}),this.$lightbox.hide(),$("#sbi_lightboxOverlay").on("click",function(n){return t()&&$("#sbi_lightbox .sbi_video")[0].pause(),"sbi_lightbox"===e(n.target).attr("id")&&i.end(),!1}),this.$lightbox.find(".sbi_lb-prev").on("click",function(){return t()&&$("#sbi_lightbox .sbi_video")[0].pause(),i.changeImage(0===i.currentImageIndex?i.album.length-1:i.currentImageIndex-1),!1}),this.$lightbox.find(".sbi_lb-container").on("swiperight",function(){return t()&&$("#sbi_lightbox .sbi_video")[0].pause(),i.changeImage(0===i.currentImageIndex?i.album.length-1:i.currentImageIndex-1),!1}),this.$lightbox.find(".sbi_lb-next").on("click",function(){return t()&&$("#sbi_lightbox .sbi_video")[0].pause(),i.changeImage(i.currentImageIndex===i.album.length-1?0:i.currentImageIndex+1),!1}),this.$lightbox.find(".sbi_lb-container").on("swipeleft",function(){return t()&&$("#sbi_lightbox .sbi_video")[0].pause(),i.changeImage(i.currentImageIndex===i.album.length-1?0:i.currentImageIndex+1),!1}),this.$lightbox.find(".sbi_lb-loader, .sbi_lb-close").on("click",function(){return t()&&$("#sbi_lightbox .sbi_video")[0].pause(),i.end(),!1})},i.prototype.start=function(t){function i(t){n.album.push({link:t.attr("href"),title:t.attr("data-title")||t.attr("title"),video:t.attr("data-video"),id:t.attr("data-id"),url:t.attr("data-url"),user:t.attr("data-user"),avatar:t.attr("data-avatar")})}var n=this,s=e(window);s.on("resize",e.proxy(this.sizeOverlay,this)),e("select, object, embed").css({visibility:"hidden"}),this.sizeOverlay(),this.album=[];var o,a=0,r=t.attr("data-lightbox-sbi");if(r){o=e(t.prop("tagName")+'[data-lightbox-sbi="'+r+'"]');for(var l=0;l<o.length;l=++l)i(e(o[l])),o[l]===t[0]&&(a=l)}else if("lightbox"===t.attr("rel"))i(t);else{o=e(t.prop("tagName")+'[rel="'+t.attr("rel")+'"]');for(var h=0;h<o.length;h=++h)i(e(o[h])),o[h]===t[0]&&(a=h)}var c=s.scrollTop()+this.options.positionFromTop,d=s.scrollLeft();this.$lightbox.css({top:c+"px",left:d+"px"}).fadeIn(this.options.fadeDuration),this.changeImage(a)},i.prototype.changeImage=function(t){var i=this;this.disableKeyboardNav();var n=this.$lightbox.find(".sbi_lb-image");this.$overlay.fadeIn(this.options.fadeDuration),e(".sbi_lb-loader").fadeIn("slow"),this.$lightbox.find(".sbi_lb-image, .sbi_lb-nav, .sbi_lb-prev, .sbi_lb-next, .sbi_lb-dataContainer, .sbi_lb-numbers, .sbi_lb-caption").hide(),this.$outerContainer.addClass("animating");var s=new Image;s.onload=function(){var o,a,r,l,h,c,d;n.attr("src",i.album[t].link),o=e(s),n.width(s.width),n.height(s.height),i.options.fitImagesInViewport&&(d=e(window).width(),c=e(window).height(),h=d-i.containerLeftPadding-i.containerRightPadding-20,l=c-i.containerTopPadding-i.containerBottomPadding-150,(s.width>h||s.height>l)&&(s.width/h>s.height/l?(r=h,a=parseInt(s.height/(s.width/r),10),n.width(r),n.height(a)):(a=l,r=parseInt(s.width/(s.height/a),10),n.width(r),n.height(a)))),i.sizeContainer(n.width(),n.height())},s.src=this.album[t].link,this.currentImageIndex=t},i.prototype.sizeOverlay=function(){this.$overlay.width(e(window).width()).height(e(document).height())},i.prototype.sizeContainer=function(t,e){function i(){n.$lightbox.find(".sbi_lb-dataContainer").width(a),n.$lightbox.find(".sbi_lb-prevLink").height(r),n.$lightbox.find(".sbi_lb-nextLink").height(r),n.showImage()}var n=this,s=this.$outerContainer.outerWidth(),o=this.$outerContainer.outerHeight(),a=t+this.containerLeftPadding+this.containerRightPadding,r=e+this.containerTopPadding+this.containerBottomPadding;s!==a||o!==r?this.$outerContainer.animate({width:a,height:r},this.options.resizeDuration,"swing",function(){i()}):i()},i.prototype.showImage=function(){this.$lightbox.find(".sbi_lb-loader").hide(),this.$lightbox.find(".sbi_lb-image").fadeIn("slow"),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},i.prototype.updateNav=function(){var t=!1;try{document.createEvent("TouchEvent"),t=this.options.alwaysShowNavOnTouchDevices?!0:!1}catch(e){}this.$lightbox.find(".sbi_lb-nav").show(),this.album.length>1&&(this.options.wrapAround?(t&&this.$lightbox.find(".sbi_lb-prev, .sbi_lb-next").css("opacity","1"),this.$lightbox.find(".sbi_lb-prev, .sbi_lb-next").show()):(this.currentImageIndex>0&&(this.$lightbox.find(".sbi_lb-prev").show(),t&&this.$lightbox.find(".sbi_lb-prev").css("opacity","1")),this.currentImageIndex<this.album.length-1&&(this.$lightbox.find(".sbi_lb-next").show(),t&&this.$lightbox.find(".sbi_lb-next").css("opacity","1"))))},i.prototype.updateDetails=function(){var e=this;t()&&($("#sbi_lightbox").removeClass("sbi_video_lightbox"),this.album[this.currentImageIndex].video.length&&($("#sbi_lightbox").addClass("sbi_video_lightbox"),$(".sbi_video").attr({src:this.album[this.currentImageIndex].video,poster:this.album[this.currentImageIndex].link,autoplay:"true"}))),$("#sbi_lightbox .sbi_instagram a").attr("href",this.album[this.currentImageIndex].url),$("#sbi_lightbox .sbi_lightbox_tooltip").hide(),$("#sbi_lightbox #sbi_mod_box").find("#sbi_photo_id").text(this.album[this.currentImageIndex].id),$("#sbi_lightbox #sbi_facebook_icon").attr("href","https://www.facebook.com/sharer/sharer.php?u="+this.album[this.currentImageIndex].url)+"&t=Text",$("#sbi_lightbox #sbi_twitter_icon").attr("href","https://twitter.com/home?status="+this.album[this.currentImageIndex].url+" "+this.album[this.currentImageIndex].title),$("#sbi_lightbox #sbi_google_icon").attr("href","https://plus.google.com/share?url="+this.album[this.currentImageIndex].url),$("#sbi_lightbox #sbi_linkedin_icon").attr("href","https://www.linkedin.com/shareArticle?mini=true&url="+this.album[this.currentImageIndex].url+"&title="+this.album[this.currentImageIndex].title),$("#sbi_lightbox #sbi_pinterest_icon").attr("href","https://pinterest.com/pin/create/button/?url="+this.album[this.currentImageIndex].url+"&media="+this.album[this.currentImageIndex].link+"&description="+this.album[this.currentImageIndex].title),"undefined"!=typeof this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title&&this.$lightbox.find(".sbi_lb-caption").html('<a class="sbi_lightbox_username" href="http://instagram.com/'+this.album[this.currentImageIndex].user+'" target="_blank"><img src="'+this.album[this.currentImageIndex].avatar+'" /><p>@'+this.album[this.currentImageIndex].user+"</p></a> "+this.album[this.currentImageIndex].title).fadeIn("fast"),this.album.length>1&&this.options.showImageNumberLabel?this.$lightbox.find(".sbi_lb-number").text(this.options.albumLabel(this.currentImageIndex+1,this.album.length)).fadeIn("fast"):this.$lightbox.find(".sbi_lb-number").hide(),this.$outerContainer.removeClass("animating"),this.$lightbox.find(".sbi_lb-dataContainer").fadeIn(this.options.resizeDuration,function(){return e.sizeOverlay()
})},i.prototype.preloadNeighboringImages=function(){if(this.album.length>this.currentImageIndex+1){var t=new Image;t.src=this.album[this.currentImageIndex+1].link}if(this.currentImageIndex>0){var e=new Image;e.src=this.album[this.currentImageIndex-1].link}},i.prototype.enableKeyboardNav=function(){e(document).on("keyup.keyboard",e.proxy(this.keyboardAction,this))},i.prototype.disableKeyboardNav=function(){e(document).off(".keyboard")},i.prototype.keyboardAction=function(t){var e=27,i=37,n=39,s=t.keyCode,o=String.fromCharCode(s).toLowerCase();s===e||o.match(/x|o|c/)?this.end():"p"===o||s===i?0!==this.currentImageIndex?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&this.album.length>1&&this.changeImage(this.album.length-1):("n"===o||s===n)&&(this.currentImageIndex!==this.album.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&this.album.length>1&&this.changeImage(0))},i.prototype.end=function(){this.disableKeyboardNav(),e(window).off("resize",this.sizeOverlay),this.$lightbox.fadeOut(this.options.fadeDuration),this.$overlay.fadeOut(this.options.fadeDuration),e("select, object, embed").css({visibility:"visible"})},i}();e(function(){var t=new i;new n(t)})}.call(this),e()}(jQuery);